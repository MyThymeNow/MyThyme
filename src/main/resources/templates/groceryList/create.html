<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8" />
    <title>Create grocery list</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/css/create.css">

    <script defer src="/create.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!--    delete script below-->
    <script>
        $(document).ready(function(){
            $("button").click(function(){
                $("#addedItemList").remove();
            });
        });
    </script>
</head>

<body>
<nav th:replace="partials/navbar :: navbar"></nav>

<section th:fragment="content">
<!--    <div class="container">-->
        <div class="hero-unit">
            <h1>Create Grocery List</h1>
        </div>
    <!--    todo 1st form -->
        <form th:action="@{/create}" th:method="post" th:object="${grocery_list}">

            <!--ENTER NAME OF LIST-->
            <div class="form-group">
                <label for="title"></label>
                <input id="title" th:field="*{name}"/>
            </div>
            <br>
            <!--ADD ITEMS TO LIST w/ ITEM, AMNT, NOTES-->
            <div id="additionalItems">
                <h1> Add Items</h1>
                <div class="form-group" id="addedItemList">
                    <label for="name[]">Item:</label>
                    <input type="text" name="name[]" id="name[]">
                    <label for="quantity[]">Quantity:</label>
                    <input type="text" name="quantity[]" id="quantity[]">
                    <label for="notes[]">Notes:</label>
                    <input type="text" name="notes[]" id="notes[]">
                </div>
<!--                <button type="button" class="btn delete btn-secondary">Remove</button>-->
<!--                <button id="addItemButton" type="button" class="btn create btn-secondary">+</button>-->
            </div>
            <br>
                <p>
                    <button type="button" class="btn btn-danger delete btn-secondary">X</button>
                    <button id="addItemButton" type="button" class="btn create btn-secondary">+</button>
                    <button onclick="removeItem()" class="btn delete buttonClass deleteMe" data-delete-list-button>Delete list</button>
    <!--            <button onclick="addelement();" id="thelist">Share</button>-->
    <!--            <input value="Save" type="submit"><a th:href="@{/groceryList/groceryLists}"></a>-->
                <button value="Save" type="submit"><a th:href="@{/groceryLists}" th:placeholder="Save"></a>Save</button><!--working-->
                </p>
        </form>
    <script>
        "use strict";
        window.onload = (function() {
            const additionalItem = document.getElementById('addItemButton');
            const removeItem = document.getElementById('removeItemButton');

            // Section grabs form information
            const itemForm = `<div class="form-group">
                  <label for="name[]">Item:</label>
                  <input type="text" name="name[]" id="name[]">
                  <label for="quantity[]">Quantity:</label>
                  <input type="text" name="quantity[]" id="quantity[]">
                  <label for="notes[]">Notes:</label>
                  <input type="text" name="notes[]" id="notes[]">
                </div>`

            // Add button feature
            additionalItem.addEventListener('click', function(event) {
                event.preventDefault();

                const addedItem = document.getElementById('additionalItems');
                let newAddedItem = document.createElement("div");
                newAddedItem.innerHTML = itemForm;
                addedItem.appendChild(newAddedItem);
            });

            //Remove button feature removeChild()
            removeItem.removeEventListener('click', function(event) {
                event.preventDefault();

                const removeItem = document.getElementById('removingItems');
                let newRemovedItem = document.removeChild(additionalItem);// *** CHECK THIS SECTION ****
                newRemovedItem.innerHtml = itemForm;
                removeItem.removeChild(newRemovedItem);//appendChild(newRemovedItem) old Entry
            });


            // Creating a function to remove item from list
            // function removeItem() {
            //
            //     // Declaring a variable to get select element
            //     var a = document.getElementById("list");
            //     var candidate = document.getElementById("candidate");
            //     var item = document.getElementById(candidate.value);
            //     a.removeChild(item);
            // }

        })
    </script>


    <template id="task-template">
        <div class="task">
            <input type="checkbox" />
            <label>
                <span class="custom-checkbox"></span>
            </label>
        </div>
    </template>
</section>
<!--        <div th:replace="partials/footer::footer"></div>-->
<!--    <footer><p th:layout:fragment="footer"></p></footer>-->

<!-- TESTING A POTENTIAL MODAL LAYOUT FOR DELETING WHOLE LIST TO CONFIRM-->
<!--<div th:fragment="modal">-->
<!--    &lt;!&ndash; Button trigger modal &ndash;&gt;-->
<!--    <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#staticBackdrop">-->
<!--        Delete My Profile-->
<!--    </button>-->

<!--    &lt;!&ndash; Modal &ndash;&gt;-->
<!--    <div class="modal fade" id="staticBackdrop" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">-->
<!--        <div class="modal-dialog">-->
<!--            <div class="modal-content">-->
<!--                <div class="modal-header">-->
<!--                    <h5 class="modal-title" id="staticBackdropLabel" th:text=""></h5>-->
<!--                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">-->
<!--                        <span aria-hidden="true">&times;</span>-->
<!--                    </button>-->
<!--                </div>-->
<!--                <div class="modal-body">-->
<!--                    Are you sure you want to delete?-->
<!--                </div>-->
<!--                <div class="modal-footer">-->
<!--                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>-->
<!--                    <a th:href="" class="btn btn-danger">Delete My Party Profile</a>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->
    </body>
</html>

<!--todo TEST FOR LATER IF ABOVE NOT WORKING PROPERLY-->
<!--<h1 class="title">Stuff I need to do</h1>-->

<!--&lt;!&ndash; LEFT side LIST&ndash;&gt;-->
<!--<div class="all-tasks">-->
<!--    <h2 class="task-list-title">My lists</h2>-->
<!--    <ul class="task-list" data-lists></ul>-->

<!--    <form action="" data-new-list-form>-->
<!--        <input-->
<!--                type="text"-->
<!--                class="new list"-->
<!--                data-new-list-input-->
<!--                placeholder="new list name"-->
<!--                aria-label="new list name"-->
<!--        />-->
<!--        <button class="btn create" aria-label="create new list">+</button>-->
<!--    </form>-->
<!--</div>-->

<!--&lt;!&ndash; RIGHT side LIST&ndash;&gt;-->
<!--<div class="todo-list" data-list-display-container>-->
<!--    <div class="todo-header">-->
<!--        <h2 class="list-title" data-list-title>YouTube</h2>-->
<!--        <p class="task-count" data-list-count>3 tasks remaining</p>-->
<!--    </div>-->

<!--    <div class="todo-body">-->
<!--        <div class="tasks" data-tasks></div>-->

<!--        <div class="new-task-creator">-->
<!--            <form action="" data-new-task-form>-->
<!--                <input-->
<!--                        type="text"-->
<!--                        data-new-task-input-->
<!--                        class="new task"-->
<!--                        placeholder="new task name"-->
<!--                        aria-label="new task name"-->
<!--                />-->
<!--                <button class="btn create" aria-label="create new task">+</button>-->
<!--            </form>-->
<!--        </div>-->

<!--        <div class="delete-stuff">-->
<!--            <button class="btn delete" data-clear-complete-tasks-button>Clear completed tasks</button>-->
<!--            <button class="btn delete" data-delete-list-button>Delete list</button>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->


<!--</div>-->
<!--<template id="task-template">-->
<!--    <div class="task">-->
<!--        <input type="checkbox" />-->
<!--        <label>-->
<!--            <span class="custom-checkbox"></span>-->
<!--        </label>-->
<!--    </div>-->
<!--</template>-->

<!--todo OLD LIST-->
<!--    <ul class="list-group">-->
<!--        <li class="list-group-item disabled" aria-disabled="true">Cras justo odio</li>-->
<!--        <li class="list-group-item">Dapibus ac facilisis in</li>-->
<!--        <li class="list-group-item">Morbi leo risus</li>-->
<!--        <li class="list-group-item">Porta ac consectetur ac</li>-->
<!--        <li class="list-group-item">Vestibulum at eros</li>-->
<!--    </ul>-->